import{_ as w}from"./71b8e0fl_cL._AC_SL1500-811e8b6d.js";import{a as V,b as x,r as D,J as y,f as e,h as u,j as t,k as s,l as o,V as S,y as k,_ as p,F as c,q as r,G as n,A as C,n as m}from"./index-64fb1acc.js";import{F as L}from"./FooTer-6bd26082.js";import{V as B}from"./VContainer-4e08f2f3.js";import{V as q,a as h}from"./VRow-040ada0a.js";/* empty css              */const I={class:"orderviwe"},F={class:"othertitle"},N={class:"bgbox"},T=t("div",{class:"bgbox2"},null,-1),A=t("h1",null,"訂單",-1),P=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消")])],-1),j=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消")])],-1),E=t("td",null," 已完成無法操作 ",-1),G=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消")])],-1),J=t("td",null," 已取消無法操作 ",-1),M={__name:"OrdersView",setup(O){const g=V(),f=x(),i=D([]),b=async(d,_)=>{try{const l=await y.post("/orders/edituseorder",{id:d,check:_}),a=i.value.findIndex(v=>v._id===d);i.value[a].ok=l.data.result.ok,i.value[a].changedate=l.data.result.changedate}catch(l){console.log(l),f({text:l.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}};return(async()=>{try{const{data:d}=await y.get("/orders");i.value.push(...d.result.map(_=>(_.total=_.cart.reduce((l,a)=>l+a.product.price*a.quantity,0),_))),g.loding=!1}catch(d){console.log(d),f({text:d.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}})(),(d,_)=>(e(),u("section",I,[t("section",F,[t("div",N,[s(S,{class:"mainimg",src:w,cover:""})]),T]),s(B,null,{default:o(()=>[s(q,null,{default:o(()=>[s(h,{cols:"12"},{default:o(()=>[A]),_:1}),s(h,{cols:"12"},{default:o(()=>[k("處理中的訂單")]),_:1}),s(h,{cols:"12"},{default:o(()=>[s(p,null,{default:o(()=>[P,t("tbody",null,[(e(!0),u(c,null,r(i.value,l=>(e(),u("tr",{key:l._id},[l.ok!=="訂單已完成"&&l.ok!=="訂單已取消"?(e(),u(c,{key:0},[t("td",null,n(l._id),1),t("td",null,n(new Date(l.date).toLocaleString()),1),t("td",null,n(l.total),1),t("td",null,[t("ul",null,[(e(!0),u(c,null,r(l.cart,a=>(e(),u("li",{key:a._id},n(a.product.name)+"*"+n(a.quantity),1))),128))])]),t("td",null,n(l.ok),1),t("td",null,n(new Date(l.changedate).toLocaleString()),1),t("td",null,n(l.seventhome),1),t("td",null,n(l.paywat),1),t("td",null,[s(C,{onClick:a=>b(l._id,5),disabled:l.ok==="取消確認中"||l.ok==="訂單已完成"||l.ok==="訂單已取消"||l.ok==="結單無法取消"},{default:o(()=>[k(" 取消訂單 ")]),_:2},1032,["onClick","disabled"])])],64)):m("",!0)]))),128))])]),_:1})]),_:1}),s(h,{cols:"12"},{default:o(()=>[k("完成的訂單")]),_:1}),s(h,{cols:"12"},{default:o(()=>[s(p,null,{default:o(()=>[j,t("tbody",null,[(e(!0),u(c,null,r(i.value,l=>(e(),u("tr",{key:l._id},[l.ok==="訂單已完成"?(e(),u(c,{key:0},[t("td",null,n(l._id),1),t("td",null,n(new Date(l.date).toLocaleString()),1),t("td",null,n(l.total),1),t("td",null,[t("ul",null,[(e(!0),u(c,null,r(l.cart,a=>(e(),u("li",{key:a._id},n(a.product.name)+"*"+n(a.quantity),1))),128))])]),t("td",null,n(l.ok),1),t("td",null,n(new Date(l.changedate).toLocaleString()),1),t("td",null,n(l.seventhome),1),t("td",null,n(l.paywat),1),E],64)):m("",!0)]))),128))])]),_:1})]),_:1}),s(h,{cols:"12"},{default:o(()=>[k("取消的訂單")]),_:1}),s(h,{cols:"12"},{default:o(()=>[s(p,null,{default:o(()=>[G,t("tbody",null,[(e(!0),u(c,null,r(i.value,l=>(e(),u("tr",{key:l._id},[l.ok==="訂單已取消"?(e(),u(c,{key:0},[t("td",null,n(l._id),1),t("td",null,n(new Date(l.date).toLocaleString()),1),t("td",null,n(l.total),1),t("td",null,[t("ul",null,[(e(!0),u(c,null,r(l.cart,a=>(e(),u("li",{key:a._id},n(a.product.name)+"*"+n(a.quantity),1))),128))])]),t("td",null,n(l.ok),1),t("td",null,n(new Date(l.changedate).toLocaleString()),1),t("td",null,n(l.seventhome),1),t("td",null,n(l.paywat),1),J],64)):m("",!0)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),s(L)]))}};export{M as default};

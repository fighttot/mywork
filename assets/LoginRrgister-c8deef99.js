import{g as z}from"./index-4db78ffb.js";import{b as P,d as E,a as N,T as B,f as _,h as U,i as e,w as o,E as j,l as a,$ as T,a1 as b,x as l,y as d,t as u,r as R,o as A,j as $,k as M,F as G}from"./index-bd1cf992.js";import{c as L,a as f,u as D,b as g,V as O,d as H}from"./index.esm-463ea2d4.js";import{V as q,a as w}from"./VRow-91ca0be0.js";import{V as W}from"./VContainer-abffc603.js";import{v as I}from"./index-33ee1372.js";/* empty css              */const J={class:"logincom"},K=l("h1",null,"登入",-1),Q={class:"text-center"},X={__name:"LoginView",setup(F){const r=P(),n=E(),x=N(),h=L({account:f().required("帳號必填").min(4,"最少四個字").max(20,"最多20"),password:f().required("密碼必填").min(4,"最少四個字").max(20,"最多20")}),{handleSubmit:C,isSubmitting:S,handleReset:V}=D({validationSchema:h}),m=g("account"),p=g("password"),k=C(async v=>{try{const{data:t}=await B.post("/users/login",{account:v.account,password:v.password});x.login({token:t.result.token,account:t.result.account,name:t.result.name,email:t.result.email,cart:t.result.cart,role:t.result.role,like:t.result.like}),r({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom",rounded:"pill",variant:"tonal"}}),V(),n.push("/")}catch(t){r({text:t.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}});return(v,t)=>(_(),U("section",J,[e(W,null,{default:o(()=>[e(q,{class:"text-center tableheight"},{default:o(()=>[e(w,{cols:"12"},{default:o(()=>[K]),_:1}),e(j),e(w,{cols:"12",style:{padding:"250px 10px 30px 10px"}},{default:o(()=>[e(O,{disabled:a(S),onSubmit:T(a(k),["prevent"])},{default:o(()=>[e(b,{label:"帳號:",counter:"",maxlength:"20",modelValue:a(m).value.value,"onUpdate:modelValue":t[0]||(t[0]=y=>a(m).value.value=y),"error-messages":a(m).errorMessage.value},null,8,["modelValue","error-messages"]),e(b,{label:"密碼:",counter:"",maxlength:"20",type:"password",modelValue:a(p).value.value,"onUpdate:modelValue":t[1]||(t[1]=y=>a(p).value.value=y),"error-messages":a(p).errorMessage.value},null,8,["modelValue","error-messages"]),l("div",Q,[e(d,{type:"submit"},{default:o(()=>[u("登入")]),_:1}),e(d,{onClick:a(V)},{default:o(()=>[u("重製")]),_:1},8,["onClick"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]))}},Y={class:"regicom"},Z=l("h1",null,"註冊",-1),ee={class:"text-center"},ae={__name:"RegisterView",setup(F){const r=P(),n=E(),x=N(),h=L({account:f().required("帳號必填").min(4,"最少四個字").max(20,"最多20"),email:f().required().test("isEmail","信箱格式錯誤",i=>I.isEmail(i)),password:f().required("密碼必填").min(4,"最少四個字").max(20,"最多20"),passwordConfirm:f().required("密碼必填").min(4,"最少四個字").max(20,"最多20").oneOf([H("password")],"密碼不一致"),name:f().required("暱稱必填").max(10,"最多10")}),{handleSubmit:C,isSubmitting:S,handleReset:V}=D({validationSchema:h}),m=g("account"),p=g("email"),k=g("password"),v=g("passwordConfirm"),t=g("name"),y=C(async i=>{try{await B.post("/users",{account:i.account,email:i.email,name:i.name,password:i.password}),r({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom",rounded:"pill",variant:"tonal"}});const{data:s}=await B.post("/users/login",{account:i.account,password:i.password});x.login({token:s.result.token,account:s.result.account,name:s.result.name,email:s.result.email,cart:s.result.cart,role:s.result.role,like:s.result.like}),r({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom",rounded:"pill",variant:"tonal"}}),V(),n.push("/")}catch(s){r({text:s.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}});return(i,s)=>(_(),U("section",Y,[e(W,null,{default:o(()=>[e(q,null,{default:o(()=>[e(w,{cols:"12",class:"text-center"},{default:o(()=>[Z]),_:1}),e(j),e(w,{cols:"12",style:{padding:"200px 10px 30px 10px"}},{default:o(()=>[e(O,{disabled:a(S),onSubmit:T(a(y),["prevent"])},{default:o(()=>[e(b,{modelValue:a(m).value.value,"onUpdate:modelValue":s[0]||(s[0]=c=>a(m).value.value=c),label:"帳號:",counter:"","max-length":"20","error-messages":a(m).errorMessage.value},null,8,["modelValue","error-messages"]),e(b,{modelValue:a(k).value.value,"onUpdate:modelValue":s[1]||(s[1]=c=>a(k).value.value=c),label:"密碼:",counter:"","max-length":"20",type:"password","error-messages":a(k).errorMessage.value},null,8,["modelValue","error-messages"]),e(b,{modelValue:a(v).value.value,"onUpdate:modelValue":s[2]||(s[2]=c=>a(v).value.value=c),label:"確認密碼:",counter:"","max-length":"20",type:"password","error-messages":a(v).errorMessage.value},null,8,["modelValue","error-messages"]),e(b,{modelValue:a(p).value.value,"onUpdate:modelValue":s[3]||(s[3]=c=>a(p).value.value=c),label:"信箱(不得重複):",type:"email","error-messages":a(p).errorMessage.value},null,8,["modelValue","error-messages"]),e(b,{modelValue:a(t).value.value,"onUpdate:modelValue":s[4]||(s[4]=c=>a(t).value.value=c),label:"暱稱(不得重複):",counter:"","max-length":"10","error-messages":a(t).errorMessage.value},null,8,["modelValue","error-messages"]),l("div",ee,[e(d,{type:"submit"},{default:o(()=>[u("註冊")]),_:1}),e(d,{onClick:a(V)},{default:o(()=>[u("重製")]),_:1},8,["onClick"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]))}},se={class:"lidcover d-flex align-center justify-center flex-column"},le=l("br",null,null,-1),oe=l("br",null,null,-1),te=l("br",null,null,-1),re=l("br",null,null,-1),ne=l("br",null,null,-1),ue=l("br",null,null,-1),ie=l("br",null,null,-1),ce=l("br",null,null,-1),de=l("br",null,null,-1),me=l("br",null,null,-1),pe=l("br",null,null,-1),ve=l("br",null,null,-1),_e={class:"inthislogon"},be={class:"shadowa"},fe={class:"shadowb"},Ce={__name:"LoginRrgister",setup(F){const r=R(null),n=R(""),x=Math.floor(Math.random()*2)+1,h=()=>{r.value&&(n.value?(r.value.play(),n.value=!n.value):(r.value.reversed(!r.value.reversed()),n.value=!n.value))};return A(()=>{r.value=z.to(".lidcover",{x:"50vw",duration:1,ease:"power",paused:!0}),r.value&&(x===1?(r.value.play(),n.value=!1):(r.value.reversed(!r.value.reversed()),n.value=!0))}),(C,S)=>(_(),U(G,null,[l("div",se,[n.value?(_(),$(d,{key:0,onClick:h,class:"bt1"},{default:o(()=>[u("歡"),le,oe,u("迎"),te,re,u("加"),ne,ue,u("入")]),_:1})):M("",!0),n.value?M("",!0):(_(),$(d,{key:1,onClick:h,class:"bt2"},{default:o(()=>[u("歡"),ie,ce,u("迎"),de,me,u("回"),pe,ve,u("來")]),_:1})),n.value?(_(),$(d,{key:2,icon:"mdi-home",class:"bt1home",to:"/"})):M("",!0),n.value?M("",!0):(_(),$(d,{key:3,icon:"mdi-home",class:"bt2home",to:"/"}))]),l("section",_e,[e(q,{class:"mainwindow d-flex align-center justify-center"},{default:o(()=>[e(w,{cols:"6"},{default:o(()=>[l("div",be,[e(X,{class:"wida"})])]),_:1}),e(w,{cols:"6"},{default:o(()=>[l("div",fe,[e(ae,{class:"widb"})])]),_:1})]),_:1})])],64))}};export{Ce as default};

import{b,r as g,H as h,f as c,j as y,w as o,i as r,W as w,x as t,h as d,n as _,F as p,D as e,y as V,t as x}from"./index-0c9fed02.js";import{V as v}from"./VContainer-4e7a447d.js";import{a as k,V as B}from"./VRow-22674c50.js";/* empty css              */const C=t("h1",null,"訂單",-1),D=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消")])],-1),I={__name:"OrdersView",setup(S){const i=b(),u=g([]),m=async(n,s)=>{try{const a=await h.post("/orders/edituseorder",{id:n,check:s}),l=u.value.findIndex(f=>f._id===n);u.value[l].ok=a.data.result.ok,u.value[l].changedate=a.data.result.changedate}catch(a){console.log(a),i({text:a.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(async()=>{try{const{data:n}=await h.get("/orders");u.value.push(...n.result.map(s=>(s.total=s.cart.reduce((a,l)=>a+l.product.price*l.quantity,0),s)))}catch(n){console.log(n),i({text:n.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}})(),(n,s)=>(c(),y(v,null,{default:o(()=>[r(B,null,{default:o(()=>[r(k,{cols:"12"},{default:o(()=>[C]),_:1}),r(k,{cols:"12"},{default:o(()=>[r(w,null,{default:o(()=>[D,t("tbody",null,[(c(!0),d(p,null,_(u.value,a=>(c(),d("tr",{key:a._id},[t("td",null,e(a._id),1),t("td",null,e(new Date(a.date).toLocaleString()),1),t("td",null,e(a.total),1),t("td",null,[t("ul",null,[(c(!0),d(p,null,_(a.cart,l=>(c(),d("li",{key:l._id},e(l.product.name)+"*"+e(l.quantity),1))),128))])]),t("td",null,e(a.ok),1),t("td",null,e(new Date(a.changedate).toLocaleString()),1),t("td",null,e(a.seventhome),1),t("td",null,e(a.paywat),1),t("td",null,[r(V,{onClick:l=>m(a._id,5),disabled:a.ok==="取消確認中"||a.ok==="訂單已完成"||a.ok==="訂單已取消"},{default:o(()=>[x("取消訂單 ")]),_:2},1032,["onClick","disabled"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{I as default};

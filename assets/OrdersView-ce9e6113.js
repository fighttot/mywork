import{_ as V}from"./71b8e0fl_cL._AC_SL1500-811e8b6d.js";import{b as v,r as x,H as f,f as r,h as i,x as t,i as e,w as n,F as _,m as y,W as C,n as k,D as s,y as h,t as m}from"./index-c5b9bec8.js";import{V as w}from"./VContainer-fc5947e2.js";import{V as B,a as g}from"./VRow-e7316706.js";/* empty css              */const D={class:"othertitle"},S={class:"bgbox"},I=t("div",{class:"bgbox2"},null,-1),L=t("h1",null,"訂單管理",-1),N=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"建立日期"),t("th",null,"使用者"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"編輯")])],-1),E={__name:"OrdersView",setup($){const p=v(),c=x([]),d=async(o,u)=>{try{const a=await f.post("/orders/editorder",{id:o,check:u}),l=c.value.findIndex(b=>b._id===o);c.value[l].ok=a.data.result.ok,c.value[l].changedate=a.data.result.changedate}catch(a){console.log(a),p({text:a.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(async()=>{try{const{data:o}=await f.get("/orders/all");c.value.push(...o.result.map(u=>(u.total=u.cart.reduce((a,l)=>a+l.product.price*l.quantity,0),u)))}catch(o){p({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}})(),(o,u)=>(r(),i(_,null,[t("section",D,[t("div",S,[e(y,{class:"mainimg",src:V,cover:""})]),I]),e(w,null,{default:n(()=>[e(B,null,{default:n(()=>[e(g,{cols:"12"},{default:n(()=>[L]),_:1}),e(g,{cols:"12"},{default:n(()=>[e(C,null,{default:n(()=>[N,t("tbody",null,[(r(!0),i(_,null,k(c.value,a=>(r(),i("tr",{key:a._id},[t("td",null,s(a._id),1),t("td",null,s(new Date(a.date).toLocaleString()),1),t("td",null,s(a.user.account),1),t("td",null,s(a.total),1),t("td",null,[t("ul",null,[(r(!0),i(_,null,k(a.cart,l=>(r(),i("li",{key:l._id},s(l.product.name)+"*"+s(l.quantity),1))),128))])]),t("td",null,s(a.ok),1),t("td",null,s(new Date(a.changedate).toLocaleString()),1),t("td",null,[e(h,{onClick:l=>d(a._id,2)},{default:n(()=>[m("確認")]),_:2},1032,["onClick"]),e(h,{onClick:l=>d(a._id,3)},{default:n(()=>[m("完成")]),_:2},1032,["onClick"]),e(h,{onClick:l=>d(a._id,4)},{default:n(()=>[m("取消")]),_:2},1032,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{E as default};

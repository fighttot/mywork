import{b as U,d as M,a as q,I as E,o as F,f as P,i,j as a,l,V as _,G as R,h as e,a1 as N,a3 as n,z as h,x}from"./index-ddf786aa.js";import{_ as $}from"./71b8e0fl_cL._AC_SL1500-811e8b6d.js";import{v as z}from"./index-0cf37f94.js";import{c as I,a as u,d as T,u as j,b as m,V as A}from"./index.esm-a5d404a0.js";import{V as D}from"./VContainer-d398d5d8.js";import{V as w,a as V}from"./VRow-24d7f900.js";/* empty css              */const G=""+new URL("alice-shimada-girls-und-panzer-fb082472.gif",import.meta.url).href,L={class:"editpass"},O={class:"othertitle"},H={class:"bgbox"},J=i("div",{class:"bgbox2"},null,-1),K=i("h1",null,"修改會員資料",-1),Q={class:"text-center"},te={__name:"EditPass",setup(W){const v=U(),C=M(),r=q(),k=I({account:u().required("帳號必填").min(4,"最少四個字").max(20,"最多20"),email:u().required("信箱必填").test("isEmail","信箱格式錯誤",o=>z.isEmail(o)),password:u().required("密碼必填").min(4,"最少四個字").max(20,"最多20"),passwordConfirm:u().required("密碼必填").min(4,"最少四個字").max(20,"最多20").oneOf([T("password")],"密碼不一致"),name:u().required("暱稱必填").max(10,"最多10")}),{handleSubmit:y,isSubmitting:S,handleReset:b}=j({validationSchema:k}),d=m("account"),c=m("email"),f=m("password"),g=m("passwordConfirm"),p=m("name"),B=y(async o=>{try{const{data:s}=await E.patch("/users/edit",{account:o.account,email:o.email,name:o.name,password:o.password});r.account=s.result.account,r.email=s.result.email,r.name=s.result.name,v({text:"修改成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom",rounded:"pill",variant:"tonal"}}),b(),C.push("/")}catch(s){v({text:s.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}});return(async()=>{try{d.value.value=r.account,c.value.value=r.email,p.value.value=r.name,r.loding=!1}catch(o){v({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}})(),(o,s)=>(F(),P("section",L,[i("section",O,[i("div",H,[a(_,{class:"mainimg",src:$,cover:""})]),J]),a(D,null,{default:l(()=>[a(w,null,{default:l(()=>[a(V,{cols:"12",class:"text-center"},{default:l(()=>[K]),_:1}),a(R),a(w,null,{default:l(()=>[a(V,{cols:"6"},{default:l(()=>[a(_,{src:G,style:{height:"500px"}})]),_:1}),a(V,{cols:"6"},{default:l(()=>[a(A,{disabled:e(S),onSubmit:N(e(B),["prevent"])},{default:l(()=>[a(n,{modelValue:e(d).value.value,"onUpdate:modelValue":s[0]||(s[0]=t=>e(d).value.value=t),label:"帳號:",counter:"","max-length":"20","error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),a(n,{modelValue:e(f).value.value,"onUpdate:modelValue":s[1]||(s[1]=t=>e(f).value.value=t),label:"密碼:",counter:"","max-length":"20",type:"password","error-messages":e(f).errorMessage.value},null,8,["modelValue","error-messages"]),a(n,{modelValue:e(g).value.value,"onUpdate:modelValue":s[2]||(s[2]=t=>e(g).value.value=t),label:"確認密碼:",counter:"","max-length":"20",type:"password","error-messages":e(g).errorMessage.value},null,8,["modelValue","error-messages"]),a(n,{modelValue:e(c).value.value,"onUpdate:modelValue":s[3]||(s[3]=t=>e(c).value.value=t),label:"信箱(不得重複):",type:"email","error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),a(n,{modelValue:e(p).value.value,"onUpdate:modelValue":s[4]||(s[4]=t=>e(p).value.value=t),label:"暱稱(不得重複):",counter:"","max-length":"10","error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),i("div",Q,[a(h,{type:"submit"},{default:l(()=>[x("修改會員資料")]),_:1}),a(h,{onClick:e(b)},{default:l(()=>[x("重製")]),_:1},8,["onClick"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{te as default};

import{b as S,d as I,a as L,r as P,c as E,U as F,I as d,X as N,e as T,o as c,f as p,i as e,j as l,l as n,V as g,Z as X,_ as $,F as j,p as q,m as _,E as m,z as k,x as b,a4 as z,a5 as R,k as v,s as f}from"./index-4da1c3a6.js";import{F as U}from"./FooTer-51eb310b.js";import{p as Y}from"./parallax-68c12e2e.js";import{V as A}from"./VContainer-69f72ce6.js";import{V as D,a as h}from"./VRow-d99317f6.js";/* empty css              */const H=""+new URL("Shoukaku-5e278418.jpg",import.meta.url).href,M={class:"likeview"},Z={class:"othertitle"},G={class:"bgbox"},J={class:"scene"},K={class:"imgbox","data-depth":"-0.5"},O={class:"d-flex align-center justify-center fill-height"},Q=e("div",{class:"bgbox2"},null,-1),W=e("h1",null,"收藏",-1),ee=e("thead",null,[e("tr",null,[e("th",null,"圖片"),e("th",null,"名稱"),e("th",null,"單價"),e("th",null,"上架狀態"),e("th",null,"移除")])],-1),te=e("br",null,null,-1),oe={key:0,colspan:"6",class:"text-center"},ue={__name:"LikeView",setup(se){const u=S(),x=I(),i=L(),r=P([]),y=async a=>{try{const{data:s}=await d.post("users/like",{product:a}),o=r.value.findIndex(t=>t.product._id===a);r.value.splice(o,1),i.like=s.result.length}catch(s){console.log(s),u({text:s.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}},C=E(()=>r.value.length>0&&!r.value.some(a=>!a.product.sell)),V=async a=>{try{const s=r.value.findIndex(t=>t.product._id===a);console.log(s);const{data:o}=await d.post("/users/likeoversing",{product:a});r.value.splice(s,1),i.like=o.result.like,i.cart=o.result.cart}catch(s){u({text:s.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}},w=async(a,s)=>{try{const{data:o}=await d.post("/users/likeover");i.like=0,i.cart=o.result,x.push("/cart")}catch(o){console.log(o),u({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}};return F(async()=>{try{const{data:t}=await d.get("/users/like");r.value.push(...t.result),i.loding=!1}catch(t){u({text:t.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}await N();const a=document.querySelector(".scene"),s=document.querySelector(".bgbox"),o=new Y(a,{scalarX:10,scalarY:10,frictionX:.1,frictionY:.1,limitX:100,limitY:100});o.disable(),s.addEventListener("mouseover",t=>{o.enable()}),s.addEventListener("mouseout",t=>{o.disable()})}),(a,s)=>{const o=T("router-link");return c(),p("section",M,[e("section",Z,[e("div",G,[e("div",J,[e("div",K,[l(g,{class:"mainimg",src:H,cover:""},{placeholder:n(()=>[e("div",O,[l(X,{color:"grey-lighten-4",indeterminate:""})])]),_:1})])])]),Q]),l(A,null,{default:n(()=>[l(D,null,{default:n(()=>[l(h,{cols:"12"},{default:n(()=>[W]),_:1}),l(h,{cols:"12",class:"likeheight"},{default:n(()=>[l($,null,{default:n(()=>[ee,e("tbody",null,[(c(!0),p(j,null,q(r.value,t=>(c(),p("tr",{key:t._id,class:z({"bg-red-lighten-5":!t.product.sell})},[e("td",null,[l(g,{src:t.product.images[0],cover:"","aspect-ratio":"1"},null,8,["src"])]),e("td",{style:R(`color: ${t.product.textColor};`)},[l(o,{to:`/proHome/${t.product._id}`},{default:n(()=>[b(m(t.product.name),1)]),_:2},1032,["to"])],4),e("td",null,m(t.product.price),1),e("td",null,[t.product.sell?(c(),v(f,{key:0,icon:"mdi-check"})):_("",!0),t.product.sell?_("",!0):(c(),v(f,{key:1,icon:"mdi-close"}))]),e("td",null,[l(k,{color:"primary",variant:"text",icon:"mdi-heart-broken",onClick:B=>y(t.product._id)},null,8,["onClick"]),te,t.product.sell?(c(),v(k,{key:0,color:"primary",variant:"text",icon:"mdi-cart",onClick:B=>V(t.product._id)},null,8,["onClick"])):_("",!0)])],2))),128)),e("tr",null,[r.value.length===0?(c(),p("td",oe,"沒有收藏")):_("",!0)])])]),_:1})]),_:1}),l(h,{cols:"12",class:"text-center"},{default:n(()=>[e("p",null,"總收藏:"+m(r.value.length),1)]),_:1}),l(h,{cols:"12",class:"text-center"},{default:n(()=>[l(k,{class:"btnlick",onClick:w,disabled:!C.value},{default:n(()=>[b("全部加入購物車")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),l(U)])}}};export{ue as default};

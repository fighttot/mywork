import{_ as w}from"./71b8e0fl_cL._AC_SL1500-811e8b6d.js";import{b as v,r as V,H as y,f as e,h as u,x as t,i as s,w as o,m as x,t as k,X as m,F as c,n as r,D as n,y as D,k as p}from"./index-976020d3.js";import{F as S}from"./FooTer-900d56da.js";import{V as C}from"./VContainer-976e0f1d.js";import{V as L,a as h}from"./VRow-0fa14704.js";/* empty css              */const B={class:"orderviwe"},I={class:"othertitle"},q={class:"bgbox"},F=t("div",{class:"bgbox2"},null,-1),N=t("h1",null,"訂單",-1),T=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消")])],-1),P=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消")])],-1),A=t("td",null," 已完成無法操作 ",-1),E=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消")])],-1),H=t("td",null," 已取消無法操作 ",-1),J={__name:"OrdersView",setup(O){const f=v(),i=V([]),g=async(d,_)=>{try{const l=await y.post("/orders/edituseorder",{id:d,check:_}),a=i.value.findIndex(b=>b._id===d);i.value[a].ok=l.data.result.ok,i.value[a].changedate=l.data.result.changedate}catch(l){console.log(l),f({text:l.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(async()=>{try{const{data:d}=await y.get("/orders");i.value.push(...d.result.map(_=>(_.total=_.cart.reduce((l,a)=>l+a.product.price*a.quantity,0),_)))}catch(d){console.log(d),f({text:d.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}})(),(d,_)=>(e(),u("section",B,[t("section",I,[t("div",q,[s(x,{class:"mainimg",src:w,cover:""})]),F]),s(C,null,{default:o(()=>[s(L,null,{default:o(()=>[s(h,{cols:"12"},{default:o(()=>[N]),_:1}),s(h,{cols:"12"},{default:o(()=>[k("處理中的訂單")]),_:1}),s(h,{cols:"12"},{default:o(()=>[s(m,null,{default:o(()=>[T,t("tbody",null,[(e(!0),u(c,null,r(i.value,l=>(e(),u("tr",{key:l._id},[l.ok!=="訂單已完成"&&l.ok!=="訂單已取消"?(e(),u(c,{key:0},[t("td",null,n(l._id),1),t("td",null,n(new Date(l.date).toLocaleString()),1),t("td",null,n(l.total),1),t("td",null,[t("ul",null,[(e(!0),u(c,null,r(l.cart,a=>(e(),u("li",{key:a._id},n(a.product.name)+"*"+n(a.quantity),1))),128))])]),t("td",null,n(l.ok),1),t("td",null,n(new Date(l.changedate).toLocaleString()),1),t("td",null,n(l.seventhome),1),t("td",null,n(l.paywat),1),t("td",null,[s(D,{onClick:a=>g(l._id,5),disabled:l.ok==="取消確認中"||l.ok==="訂單已完成"||l.ok==="訂單已取消"||l.ok==="結單無法取消"},{default:o(()=>[k(" 取消訂單 ")]),_:2},1032,["onClick","disabled"])])],64)):p("",!0)]))),128))])]),_:1})]),_:1}),s(h,{cols:"12"},{default:o(()=>[k("完成的訂單")]),_:1}),s(h,{cols:"12"},{default:o(()=>[s(m,null,{default:o(()=>[P,t("tbody",null,[(e(!0),u(c,null,r(i.value,l=>(e(),u("tr",{key:l._id},[l.ok==="訂單已完成"?(e(),u(c,{key:0},[t("td",null,n(l._id),1),t("td",null,n(new Date(l.date).toLocaleString()),1),t("td",null,n(l.total),1),t("td",null,[t("ul",null,[(e(!0),u(c,null,r(l.cart,a=>(e(),u("li",{key:a._id},n(a.product.name)+"*"+n(a.quantity),1))),128))])]),t("td",null,n(l.ok),1),t("td",null,n(new Date(l.changedate).toLocaleString()),1),t("td",null,n(l.seventhome),1),t("td",null,n(l.paywat),1),A],64)):p("",!0)]))),128))])]),_:1})]),_:1}),s(h,{cols:"12"},{default:o(()=>[k("取消的訂單")]),_:1}),s(h,{cols:"12"},{default:o(()=>[s(m,null,{default:o(()=>[E,t("tbody",null,[(e(!0),u(c,null,r(i.value,l=>(e(),u("tr",{key:l._id},[l.ok==="訂單已取消"?(e(),u(c,{key:0},[t("td",null,n(l._id),1),t("td",null,n(new Date(l.date).toLocaleString()),1),t("td",null,n(l.total),1),t("td",null,[t("ul",null,[(e(!0),u(c,null,r(l.cart,a=>(e(),u("li",{key:a._id},n(a.product.name)+"*"+n(a.quantity),1))),128))])]),t("td",null,n(l.ok),1),t("td",null,n(new Date(l.changedate).toLocaleString()),1),t("td",null,n(l.seventhome),1),t("td",null,n(l.paywat),1),H],64)):p("",!0)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),s(S)]))}};export{J as default};

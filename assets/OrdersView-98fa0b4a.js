import{a as D,b as C,r as B,U as I,I as S,X as q,o,f as u,j as n,l as s,i as t,V as g,x as k,_ as w,F as c,p as _,E as a,z as E,m as v}from"./index-ea2ca1d0.js";import{F as R}from"./FooTer-252c747e.js";import{g as p}from"./index-4db78ffb.js";import{V as T}from"./VContainer-aebd8b61.js";import{V as U,a as h}from"./VRow-886c420e.js";/* empty css              */const F=""+new URL("chair-c29c6dab.gif",import.meta.url).href,N=""+new URL("chairone-3d2b4ca2.gif",import.meta.url).href,P=""+new URL("yamada-f121a41b.png",import.meta.url).href,W={class:"orderviwe"},A=t("div",{class:"yamadathanks"},[t("div",{class:"yamadathanksBG"})],-1),G=t("h1",null,"訂單",-1),H=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消"),t("th",null,"狀態")])],-1),j=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消"),t("th",null,"狀態")])],-1),z=t("td",null," 已完成無法操作 ",-1),M=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消"),t("th",null,"狀態")])],-1),O=t("td",null," 已取消無法操作 ",-1),tt={__name:"OrdersView",setup(X){const b=D(),x=C(),d=B([]),L=async(i,m)=>{try{const l=await S.post("/orders/edituseorder",{id:i,check:m}),e=d.value.findIndex(V=>V._id===i);d.value[e].ok=l.data.result.ok,d.value[e].changedate=l.data.result.changedate}catch(l){console.log(l),x({text:l.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}};return I(async()=>{try{const{data:i}=await S.get("/orders");d.value.push(...i.result.map(r=>(r.total=r.cart.reduce((f,y)=>f+y.product.price*y.quantity,0),r))),await q(),b.loding=!1;const m=window.innerWidth,l=window.innerHeight;p.timeline({defaults:{duration:6,ease:"linear"},repeat:-1,yoyo:!0}).to(".scrolling1",{y:l/2}).to(".scrolling1",{opacity:0,duration:0}).to(".scrolling",{opacity:1,duration:0}).to(".scrolling",{x:m-100,duration:10}).to(".scrolling",{opacity:0,duration:0}),document.querySelectorAll(".v-table__wrapper").forEach(r=>{r.addEventListener("mouseover",f=>{const y=r.getBoundingClientRect();p.to(".yamada",{opacity:1,x:-270,y:y.top,duration:1}),p.to(".yamadathanks",{opacity:1,x:-400,y:y.top+130,duration:1})}),r.addEventListener("mouseout",f=>{p.to(".yamada",{opacity:0,x:270,duration:1}),p.to(".yamadathanks",{opacity:0,x:400,duration:1})})}),p.fromTo(".yamadathanksBG",{opacity:1},{opacity:0,duration:2,repeat:-1,ease:"back",yoyo:!0,repeatDelay:1})}catch(i){console.log(i),x({text:i.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}b.loding=!1}),(i,m)=>(o(),u("section",W,[n(g,{src:F,cover:"",class:"scrolling"}),n(g,{src:N,cover:"",class:"scrolling1"}),n(g,{src:P,cover:"",class:"yamada"}),A,n(T,null,{default:s(()=>[n(U,null,{default:s(()=>[n(h,{cols:"12"},{default:s(()=>[G]),_:1}),n(h,{cols:"12"},{default:s(()=>[k("處理中的訂單")]),_:1}),n(h,{cols:"12"},{default:s(()=>[n(w,null,{default:s(()=>[H,t("tbody",null,[(o(!0),u(c,null,_(d.value,l=>(o(),u("tr",{key:l._id},[l.ok!=="訂單已完成"&&l.ok!=="訂單已取消"?(o(),u(c,{key:0},[t("td",null,a(l._id),1),t("td",null,a(new Date(l.date).toLocaleString()),1),t("td",null,a(l.total),1),t("td",null,[t("ul",null,[(o(!0),u(c,null,_(l.cart,e=>(o(),u("li",{key:e._id},a(e.product.name)+"*"+a(e.quantity),1))),128))])]),t("td",null,a(new Date(l.changedate).toLocaleString()),1),t("td",null,a(l.seventhome),1),t("td",null,a(l.paywat),1),t("td",null,[n(E,{onClick:e=>L(l._id,5),disabled:l.ok==="取消確認中"||l.ok==="訂單已完成"||l.ok==="訂單已取消"||l.ok==="結單無法取消"},{default:s(()=>[k(" 取消訂單 ")]),_:2},1032,["onClick","disabled"])]),t("td",null,a(l.ok),1)],64)):v("",!0)]))),128))])]),_:1})]),_:1}),n(h,{cols:"12"},{default:s(()=>[k("完成的訂單")]),_:1}),n(h,{cols:"12"},{default:s(()=>[n(w,null,{default:s(()=>[j,t("tbody",null,[(o(!0),u(c,null,_(d.value,l=>(o(),u("tr",{key:l._id},[l.ok==="訂單已完成"?(o(),u(c,{key:0},[t("td",null,a(l._id),1),t("td",null,a(new Date(l.date).toLocaleString()),1),t("td",null,a(l.total),1),t("td",null,[t("ul",null,[(o(!0),u(c,null,_(l.cart,e=>(o(),u("li",{key:e._id},a(e.product.name)+"*"+a(e.quantity),1))),128))])]),t("td",null,a(new Date(l.changedate).toLocaleString()),1),t("td",null,a(l.seventhome),1),t("td",null,a(l.paywat),1),z,t("td",null,a(l.ok),1)],64)):v("",!0)]))),128))])]),_:1})]),_:1}),n(h,{cols:"12"},{default:s(()=>[k("取消的訂單")]),_:1}),n(h,{cols:"12"},{default:s(()=>[n(w,null,{default:s(()=>[M,t("tbody",null,[(o(!0),u(c,null,_(d.value,l=>(o(),u("tr",{key:l._id},[l.ok==="訂單已取消"?(o(),u(c,{key:0},[t("td",null,a(l._id),1),t("td",null,a(new Date(l.date).toLocaleString()),1),t("td",null,a(l.total),1),t("td",null,[t("ul",null,[(o(!0),u(c,null,_(l.cart,e=>(o(),u("li",{key:e._id},a(e.product.name)+"*"+a(e.quantity),1))),128))])]),t("td",null,a(new Date(l.changedate).toLocaleString()),1),t("td",null,a(l.seventhome),1),t("td",null,a(l.paywat),1),O,t("td",null,a(l.ok),1)],64)):v("",!0)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),n(R)]))}};export{tt as default};

import{_ as S}from"./71b8e0fl_cL._AC_SL1500-811e8b6d.js";import{a as D,b as L,r as C,U as B,I as b,X as I,o,f as u,j as a,i as t,l as s,V as m,x as g,_ as f,F as c,p as h,E as n,z as U,m as k}from"./index-3d872047.js";import{F as q}from"./FooTer-dc11e6bd.js";import{g as F}from"./index-4db78ffb.js";import{V as N}from"./VContainer-d80bc377.js";import{V as R,a as r}from"./VRow-44ee2d34.js";/* empty css              */const T=""+new URL("chair-c29c6dab.gif",import.meta.url).href,W=""+new URL("chairone-3d2b4ca2.gif",import.meta.url).href,E=""+new URL("chairtwo-7c6e05dc.gif",import.meta.url).href,H={class:"orderviwe"},P={class:"othertitle"},$={class:"bgbox"},j=t("div",{class:"bgbox2"},null,-1),z=t("h1",null,"訂單",-1),A=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消")])],-1),M=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消")])],-1),O=t("td",null," 已完成無法操作 ",-1),X=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"地址"),t("th",null,"付費方式"),t("th",null,"取消")])],-1),G=t("td",null," 已取消無法操作 ",-1),at={__name:"OrdersView",setup(J){const v=D(),y=L(),d=C([]),V=async(i,p)=>{try{const l=await b.post("/orders/edituseorder",{id:i,check:p}),e=d.value.findIndex(_=>_._id===i);d.value[e].ok=l.data.result.ok,d.value[e].changedate=l.data.result.changedate}catch(l){console.log(l),y({text:l.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}};return B(async()=>{try{const{data:i}=await b.get("/orders");d.value.push(...i.result.map(_=>(_.total=_.cart.reduce((x,w)=>x+w.product.price*w.quantity,0),_))),await I();const p=window.innerWidth,l=window.innerHeight;F.timeline({defaults:{duration:6,ease:"linear"},repeat:-1,yoyo:!0}).to(".scrolling1",{y:l/2}).to(".scrolling1",{opacity:0,duration:0}).to(".scrolling",{opacity:1,duration:0}).to(".scrolling",{x:p-100,duration:10}).to(".scrolling",{opacity:0,duration:0}).to(".scrolling2",{opacity:1,duration:0}).to(".scrolling2",{y:-l/2})}catch(i){console.log(i),y({text:i.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}v.loding=!1}),(i,p)=>(o(),u("section",H,[a(m,{src:T,cover:"",class:"scrolling"}),a(m,{src:W,cover:"",class:"scrolling1"}),a(m,{src:E,cover:"",class:"scrolling2"}),t("section",P,[t("div",$,[a(m,{class:"mainimg",src:S,cover:""})]),j]),a(N,null,{default:s(()=>[a(R,null,{default:s(()=>[a(r,{cols:"12"},{default:s(()=>[z]),_:1}),a(r,{cols:"12"},{default:s(()=>[g("處理中的訂單")]),_:1}),a(r,{cols:"12"},{default:s(()=>[a(f,null,{default:s(()=>[A,t("tbody",null,[(o(!0),u(c,null,h(d.value,l=>(o(),u("tr",{key:l._id},[l.ok!=="訂單已完成"&&l.ok!=="訂單已取消"?(o(),u(c,{key:0},[t("td",null,n(l._id),1),t("td",null,n(new Date(l.date).toLocaleString()),1),t("td",null,n(l.total),1),t("td",null,[t("ul",null,[(o(!0),u(c,null,h(l.cart,e=>(o(),u("li",{key:e._id},n(e.product.name)+"*"+n(e.quantity),1))),128))])]),t("td",null,n(l.ok),1),t("td",null,n(new Date(l.changedate).toLocaleString()),1),t("td",null,n(l.seventhome),1),t("td",null,n(l.paywat),1),t("td",null,[a(U,{onClick:e=>V(l._id,5),disabled:l.ok==="取消確認中"||l.ok==="訂單已完成"||l.ok==="訂單已取消"||l.ok==="結單無法取消"},{default:s(()=>[g(" 取消訂單 ")]),_:2},1032,["onClick","disabled"])])],64)):k("",!0)]))),128))])]),_:1})]),_:1}),a(r,{cols:"12"},{default:s(()=>[g("完成的訂單")]),_:1}),a(r,{cols:"12"},{default:s(()=>[a(f,null,{default:s(()=>[M,t("tbody",null,[(o(!0),u(c,null,h(d.value,l=>(o(),u("tr",{key:l._id},[l.ok==="訂單已完成"?(o(),u(c,{key:0},[t("td",null,n(l._id),1),t("td",null,n(new Date(l.date).toLocaleString()),1),t("td",null,n(l.total),1),t("td",null,[t("ul",null,[(o(!0),u(c,null,h(l.cart,e=>(o(),u("li",{key:e._id},n(e.product.name)+"*"+n(e.quantity),1))),128))])]),t("td",null,n(l.ok),1),t("td",null,n(new Date(l.changedate).toLocaleString()),1),t("td",null,n(l.seventhome),1),t("td",null,n(l.paywat),1),O],64)):k("",!0)]))),128))])]),_:1})]),_:1}),a(r,{cols:"12"},{default:s(()=>[g("取消的訂單")]),_:1}),a(r,{cols:"12"},{default:s(()=>[a(f,null,{default:s(()=>[X,t("tbody",null,[(o(!0),u(c,null,h(d.value,l=>(o(),u("tr",{key:l._id},[l.ok==="訂單已取消"?(o(),u(c,{key:0},[t("td",null,n(l._id),1),t("td",null,n(new Date(l.date).toLocaleString()),1),t("td",null,n(l.total),1),t("td",null,[t("ul",null,[(o(!0),u(c,null,h(l.cart,e=>(o(),u("li",{key:e._id},n(e.product.name)+"*"+n(e.quantity),1))),128))])]),t("td",null,n(l.ok),1),t("td",null,n(new Date(l.changedate).toLocaleString()),1),t("td",null,n(l.seventhome),1),t("td",null,n(l.paywat),1),G],64)):k("",!0)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),a(q)]))}};export{at as default};

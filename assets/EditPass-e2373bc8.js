import{b as S,d as B,a as M,H as U,f as q,j as E,w as r,i as s,E as F,l as e,$ as P,a1 as u,x as w,y as g,t as b}from"./index-bd1cf992.js";import{v as $}from"./index-33ee1372.js";import{c as N,a as n,d as R,u as T,b as m,V as j}from"./index.esm-463ea2d4.js";import{V as A}from"./VContainer-abffc603.js";import{a as x,V as D}from"./VRow-91ca0be0.js";/* empty css              */const H=w("h1",null,"修改會員資料",-1),O={class:"text-center"},W={__name:"EditPass",setup(z){const p=S(),h=B(),t=M(),C=N({account:n().required("帳號必填").min(4,"最少四個字").max(20,"最多20"),email:n().required("信箱必填").test("isEmail","信箱格式錯誤",o=>$.isEmail(o)),password:n().required("密碼必填").min(4,"最少四個字").max(20,"最多20"),passwordConfirm:n().required("密碼必填").min(4,"最少四個字").max(20,"最多20").oneOf([R("password")],"密碼不一致"),name:n().required("暱稱必填").max(10,"最多10")}),{handleSubmit:y,isSubmitting:k,handleReset:f}=T({validationSchema:C}),d=m("account"),i=m("email"),v=m("password"),V=m("passwordConfirm"),c=m("name"),_=y(async o=>{try{const{data:a}=await U.patch("/users/edit",{account:o.account,email:o.email,name:o.name,password:o.password});t.account=a.result.account,t.email=a.result.email,t.name=a.result.name,p({text:"修改成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom",rounded:"pill",variant:"tonal"}}),f(),h.push("/")}catch(a){p({text:a.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}});return(async()=>{try{d.value.value=t.account,i.value.value=t.email,c.value.value=t.name}catch(o){p({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}})(),(o,a)=>(q(),E(A,null,{default:r(()=>[s(D,null,{default:r(()=>[s(x,{cols:"12",class:"text-center"},{default:r(()=>[H]),_:1}),s(F),s(x,{cols:"12",style:{padding:"200px 10px 30px 10px"}},{default:r(()=>[s(j,{disabled:e(k),onSubmit:P(e(_),["prevent"])},{default:r(()=>[s(u,{modelValue:e(d).value.value,"onUpdate:modelValue":a[0]||(a[0]=l=>e(d).value.value=l),label:"帳號:",counter:"","max-length":"20","error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{modelValue:e(v).value.value,"onUpdate:modelValue":a[1]||(a[1]=l=>e(v).value.value=l),label:"密碼:",counter:"","max-length":"20",type:"password","error-messages":e(v).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{modelValue:e(V).value.value,"onUpdate:modelValue":a[2]||(a[2]=l=>e(V).value.value=l),label:"確認密碼:",counter:"","max-length":"20",type:"password","error-messages":e(V).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{modelValue:e(i).value.value,"onUpdate:modelValue":a[3]||(a[3]=l=>e(i).value.value=l),label:"信箱(不得重複):",type:"email","error-messages":e(i).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{modelValue:e(c).value.value,"onUpdate:modelValue":a[4]||(a[4]=l=>e(c).value.value=l),label:"暱稱(不得重複):",counter:"","max-length":"10","error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),w("div",O,[s(g,{type:"submit"},{default:r(()=>[b("修改會員資料")]),_:1}),s(g,{onClick:e(f)},{default:r(()=>[b("重製")]),_:1},8,["onClick"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{W as default};

import{b as B,d as M,a as U,H as q,f as E,h as F,x as i,i as s,w as l,m as P,E as $,l as e,$ as N,a1 as n,y as x,t as _}from"./index-241d7cb0.js";import{_ as R}from"./71b8e0fl_cL._AC_SL1500-811e8b6d.js";import{v as T}from"./index-260bc41f.js";import{c as A,a as u,d as D,u as H,b as m,V as I}from"./index.esm-1296c229.js";import{V as O}from"./VContainer-57cdae22.js";import{V as w,a as g}from"./VRow-4219253d.js";/* empty css              */const j={class:"editpass"},z={class:"othertitle"},G={class:"bgbox"},J=i("div",{class:"bgbox2"},null,-1),K=i("h1",null,"修改會員資料",-1),L={class:"text-center"},oe={__name:"EditPass",setup(Q){const v=B(),h=M(),r=U(),C=A({account:u().required("帳號必填").min(4,"最少四個字").max(20,"最多20"),email:u().required("信箱必填").test("isEmail","信箱格式錯誤",o=>T.isEmail(o)),password:u().required("密碼必填").min(4,"最少四個字").max(20,"最多20"),passwordConfirm:u().required("密碼必填").min(4,"最少四個字").max(20,"最多20").oneOf([D("password")],"密碼不一致"),name:u().required("暱稱必填").max(10,"最多10")}),{handleSubmit:k,isSubmitting:y,handleReset:f}=H({validationSchema:C}),d=m("account"),c=m("email"),V=m("password"),b=m("passwordConfirm"),p=m("name"),S=k(async o=>{try{const{data:a}=await q.patch("/users/edit",{account:o.account,email:o.email,name:o.name,password:o.password});r.account=a.result.account,r.email=a.result.email,r.name=a.result.name,v({text:"修改成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom",rounded:"pill",variant:"tonal"}}),f(),h.push("/")}catch(a){v({text:a.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}});return(async()=>{try{d.value.value=r.account,c.value.value=r.email,p.value.value=r.name}catch(o){v({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}})(),(o,a)=>(E(),F("section",j,[i("section",z,[i("div",G,[s(P,{class:"mainimg",src:R,cover:""})]),J]),s(O,null,{default:l(()=>[s(w,null,{default:l(()=>[s(g,{cols:"12",class:"text-center"},{default:l(()=>[K]),_:1}),s($),s(w,null,{default:l(()=>[s(g,{cols:"6"}),s(g,{cols:"6"},{default:l(()=>[s(I,{disabled:e(y),onSubmit:N(e(S),["prevent"])},{default:l(()=>[s(n,{modelValue:e(d).value.value,"onUpdate:modelValue":a[0]||(a[0]=t=>e(d).value.value=t),label:"帳號:",counter:"","max-length":"20","error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{modelValue:e(V).value.value,"onUpdate:modelValue":a[1]||(a[1]=t=>e(V).value.value=t),label:"密碼:",counter:"","max-length":"20",type:"password","error-messages":e(V).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{modelValue:e(b).value.value,"onUpdate:modelValue":a[2]||(a[2]=t=>e(b).value.value=t),label:"確認密碼:",counter:"","max-length":"20",type:"password","error-messages":e(b).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{modelValue:e(c).value.value,"onUpdate:modelValue":a[3]||(a[3]=t=>e(c).value.value=t),label:"信箱(不得重複):",type:"email","error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{modelValue:e(p).value.value,"onUpdate:modelValue":a[4]||(a[4]=t=>e(p).value.value=t),label:"暱稱(不得重複):",counter:"","max-length":"10","error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),i("div",L,[s(x,{type:"submit"},{default:l(()=>[_("修改會員資料")]),_:1}),s(x,{onClick:e(f)},{default:l(()=>[_("重製")]),_:1},8,["onClick"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{oe as default};

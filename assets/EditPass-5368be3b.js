import{b as B,d as M,a as U,J as q,f as E,h as F,j as i,k as s,l as t,V as P,H as N,i as e,a1 as R,a3 as n,A as _,y as x}from"./index-64fb1acc.js";import{_ as $}from"./71b8e0fl_cL._AC_SL1500-811e8b6d.js";import{v as A}from"./index-a79e872c.js";import{c as T,a as u,d as j,u as D,b as m,V as H}from"./index.esm-fbdf4418.js";import{V as I}from"./VContainer-4e08f2f3.js";import{V as h,a as b}from"./VRow-040ada0a.js";/* empty css              */const J={class:"editpass"},O={class:"othertitle"},z={class:"bgbox"},G=i("div",{class:"bgbox2"},null,-1),K=i("h1",null,"修改會員資料",-1),L={class:"text-center"},oe={__name:"EditPass",setup(Q){const v=B(),w=M(),r=U(),C=T({account:u().required("帳號必填").min(4,"最少四個字").max(20,"最多20"),email:u().required("信箱必填").test("isEmail","信箱格式錯誤",o=>A.isEmail(o)),password:u().required("密碼必填").min(4,"最少四個字").max(20,"最多20"),passwordConfirm:u().required("密碼必填").min(4,"最少四個字").max(20,"最多20").oneOf([j("password")],"密碼不一致"),name:u().required("暱稱必填").max(10,"最多10")}),{handleSubmit:k,isSubmitting:y,handleReset:f}=D({validationSchema:C}),d=m("account"),c=m("email"),V=m("password"),g=m("passwordConfirm"),p=m("name"),S=k(async o=>{try{const{data:a}=await q.patch("/users/edit",{account:o.account,email:o.email,name:o.name,password:o.password});r.account=a.result.account,r.email=a.result.email,r.name=a.result.name,v({text:"修改成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom",rounded:"pill",variant:"tonal"}}),f(),w.push("/")}catch(a){v({text:a.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}});return(async()=>{try{d.value.value=r.account,c.value.value=r.email,p.value.value=r.name,r.loding=!1}catch(o){v({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom",rounded:"pill",variant:"tonal"}})}})(),(o,a)=>(E(),F("section",J,[i("section",O,[i("div",z,[s(P,{class:"mainimg",src:$,cover:""})]),G]),s(I,null,{default:t(()=>[s(h,null,{default:t(()=>[s(b,{cols:"12",class:"text-center"},{default:t(()=>[K]),_:1}),s(N),s(h,null,{default:t(()=>[s(b,{cols:"6"}),s(b,{cols:"6"},{default:t(()=>[s(H,{disabled:e(y),onSubmit:R(e(S),["prevent"])},{default:t(()=>[s(n,{modelValue:e(d).value.value,"onUpdate:modelValue":a[0]||(a[0]=l=>e(d).value.value=l),label:"帳號:",counter:"","max-length":"20","error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{modelValue:e(V).value.value,"onUpdate:modelValue":a[1]||(a[1]=l=>e(V).value.value=l),label:"密碼:",counter:"","max-length":"20",type:"password","error-messages":e(V).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{modelValue:e(g).value.value,"onUpdate:modelValue":a[2]||(a[2]=l=>e(g).value.value=l),label:"確認密碼:",counter:"","max-length":"20",type:"password","error-messages":e(g).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{modelValue:e(c).value.value,"onUpdate:modelValue":a[3]||(a[3]=l=>e(c).value.value=l),label:"信箱(不得重複):",type:"email","error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{modelValue:e(p).value.value,"onUpdate:modelValue":a[4]||(a[4]=l=>e(p).value.value=l),label:"暱稱(不得重複):",counter:"","max-length":"10","error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),i("div",L,[s(_,{type:"submit"},{default:t(()=>[x("修改會員資料")]),_:1}),s(_,{onClick:e(f)},{default:t(()=>[x("重製")]),_:1},8,["onClick"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{oe as default};

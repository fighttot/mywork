import{b as g,r as y,H as h,f as r,j as V,w as s,i as c,W as b,x as t,h as d,n as _,F as p,D as n,y as w,t as x}from"./index-c5b9bec8.js";import{V as B}from"./VContainer-fc5947e2.js";import{a as m,V as C}from"./VRow-e7316706.js";/* empty css              */const v=t("h1",null,"訂單",-1),D=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"日期"),t("th",null,"金額"),t("th",null,"商品"),t("th",null,"狀態"),t("th",null,"修改日期"),t("th",null,"取消")])],-1),I={__name:"OrdersView",setup(S){const i=g(),u=y([]),f=async(l,o)=>{try{const a=await h.post("/orders/edituseorder",{id:l,check:o}),e=u.value.findIndex(k=>k._id===l);u.value[e].ok=a.data.result.ok,u.value[e].changedate=a.data.result.changedate}catch(a){console.log(a),i({text:a.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(async()=>{try{const{data:l}=await h.get("/orders");u.value.push(...l.result.map(o=>(o.total=o.cart.reduce((a,e)=>a+e.product.price*e.quantity,0),o)))}catch(l){console.log(l),i({text:l.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}})(),(l,o)=>(r(),V(B,null,{default:s(()=>[c(C,null,{default:s(()=>[c(m,{cols:"12"},{default:s(()=>[v]),_:1}),c(m,{cols:"12"},{default:s(()=>[c(b,null,{default:s(()=>[D,t("tbody",null,[(r(!0),d(p,null,_(u.value,a=>(r(),d("tr",{key:a._id},[t("td",null,n(a._id),1),t("td",null,n(new Date(a.date).toLocaleString()),1),t("td",null,n(a.total),1),t("td",null,[t("ul",null,[(r(!0),d(p,null,_(a.cart,e=>(r(),d("li",{key:e._id},n(e.product.name)+"*"+n(e.quantity),1))),128))])]),t("td",null,n(a.ok),1),t("td",null,n(new Date(a.changedate).toLocaleString()),1),t("td",null,[c(w,{onClick:e=>f(a._id,5)},{default:s(()=>[x("取消")]),_:2},1032,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{I as default};
